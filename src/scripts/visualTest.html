<html>
<head>
  <meta charset="UTF-8">
  <script language="javascript" type="text/javascript" src="vendor/p5.min.js"></script>
  <script src="/car.js"></script>
  <script src="/streetNode.js"></script>
  <script src="/smallCity.js"></script>
  <script src="/bigCity.js"></script>
  <script src="/pathFinder.js"></script>
  <script src="/converter.js"></script>
  <script >
  
  var Nodes =[];
  

  var Node1;
  var Node2; 
  var Node3;
  var Node4;
  var Node5;
  var Node6;
  var Node42;

  var testCar;

  function setup(){
  	createCanvas(windowWidth,windowHeight);

  	testCar = new Car();

  	fill(240);
  	stroke(230);

  	//background(0);

  	Node1 = new SmallCity(200,200);
  	Node2 = new StreetNode(280,360);
  	Node3 = new StreetNode(400,400);
  	Node4 = new StreetNode(430,390);
  	Node5 = new SmallCity(370,280);
  	Node6 = new BigCity(330,170);
  	Node42 = new StreetNode(390,370);


  	Nodes.push(Node1);
  	Nodes.push(Node2);
  	Nodes.push(Node3);
  	Nodes.push(Node4);
  	Nodes.push(Node5);
  	Nodes.push(Node6);
  	Nodes.push(Node42);

  	Node1.connectedTo.push(Node2);
  	Node2.connectedTo.push(Node3);
  	Node3.connectedTo.push(Node4);
  	Node3.connectedTo.push(Node42);  	
  	Node4.connectedTo.push(Node5);
  	Node42.connectedTo.push(Node5);

  	Node5.connectedTo.push(Node6);
  	//Node6.connectedTo.push(Node1);
/*
  	
  	Nodes = JSONtoNodes( [ { x1: '100.5', y1: '56.5', x2: '183.5', y2: '61.5' },
  	{ x1: '111.5', y1: '99.5', x2: '100.5', y2: '56.5' },
  	{ x1: '188.5', y1: '128.5', x2: '183.5', y2: '61.5' },
  	{ x1: '188.5', y1: '128.5', x2: '242.5', y2: '90.5' },
  	{ x1: '183.5', y1: '61.5', x2: '136.5', y2: '150.5' },
  	{ x1: '111.5', y1: '99.5', x2: '100.5', y2: '190.5' },
  	{ x1: '136.5', y1: '150.5', x2: '100.5', y2: '190.5' },
  	{ x1: '242.5', y1: '90.5', x2: '198.5', y2: '209.5' },
  	{ x1: '136.5', y1: '150.5', x2: '198.5', y2: '209.5' } ]
  	);
	 
*/
/*
	Nodes = JSONtoNodes([{"x1":"264.65","y1":"17.19","x2":"287.16","y2":"44.21"},{"x1":"302.28","y1":"47.41","x2":"287.16","y2":"44.21"},{"x1":"304.96","y1":"62.89","x2":"302.28","y2":"47.41"},{"x1":"303.62","y1":"85.7","x2":"304.96","y2":"62.89"},{"x1":"311.74","y1":"102.83","x2":"303.62","y2":"85.7"},{"x1":"280.48","y1":"149.61","x2":"311.74","y2":"102.83"},{"x1":"264.65","y1":"17.19","x2":"224.9","y2":"134.92"},{"x1":"280.48","y1":"149.61","x2":"224.9","y2":"134.92"},{"x1":"295.68","y1":"202.7","x2":"280.48","y2":"149.61"},{"x1":"284.08","y1":"162.18","x2":"262.08","y2":"146.22"},{"x1":"224.9","y1":"134.92","x2":"174.08","y2":"173.88"},{"x1":"295.68","y1":"202.7","x2":"291.04","y2":"229.7"},{"x1":"381.78","y1":"99.7","x2":"324.92","y2":"170.49"},{"x1":"392.27","y1":"101.44","x2":"381.78","y2":"99.7"},{"x1":"428.28","y1":"149.34","x2":"392.27","y2":"101.44"},{"x1":"437.35","y1":"146.22","x2":"428.28","y2":"149.34"},{"x1":"446.71","y1":"164.44","x2":"437.35","y2":"146.22"},{"x1":"324.92","y1":"170.49","x2":"342.41","y2":"182.51"},{"x1":"330.69","y1":"196.2","x2":"342.41","y2":"182.51"},{"x1":"455.39","y1":"185.32","x2":"446.71","y2":"164.44"},{"x1":"347.21","y1":"240.64","x2":"455.39","y2":"185.32"},{"x1":"477.34","y1":"199.7","x2":"455.39","y2":"185.32"},{"x1":"415.28","y1":"319.7","x2":"477.34","y2":"199.7"},{"x1":"392.27","y1":"314.9","x2":"415.28","y2":"319.7"},{"x1":"347.21","y1":"240.64","x2":"392.27","y2":"314.9"},{"x1":"324.48","y1":"220.45","x2":"330.69","y2":"196.2"},{"x1":"347.21","y1":"240.64","x2":"324.48","y2":"220.45"},{"x1":"446.71","y1":"339.3","x2":"415.28","y2":"319.7"},{"x1":"510.66","y1":"356.68","x2":"446.71","y2":"339.3"},{"x1":"174.08","y1":"173.88","x2":"165.47","y2":"221.61"},{"x1":"115.76","y1":"228.39","x2":"174.08","y2":"173.88"},{"x1":"510.66","y1":"356.68","x2":"549.02","y2":"373.3"},{"x1":"484.28","y1":"431.2","x2":"549.02","y2":"373.3"},{"x1":"395.06","y1":"391.56","x2":"484.28","y2":"431.2"},{"x1":"331.68","y1":"394.3","x2":"395.06","y2":"391.56"},{"x1":"334.06","y1":"420.9","x2":"328.18","y2":"378.66"},{"x1":"369.74","y1":"370.2","x2":"328.18","y2":"378.66"},{"x1":"415.28","y1":"319.7","x2":"406.78","y2":"331.7"},{"x1":"422.23","y1":"358.51","x2":"406.78","y2":"331.7"},{"x1":"492.87","y1":"351.85","x2":"448.77","y2":"394.3"},{"x1":"422.23","y1":"358.51","x2":"448.77","y2":"394.3"},{"x1":"415.28","y1":"319.7","x2":"422.23","y2":"358.51"},{"x1":"369.74","y1":"370.2","x2":"422.23","y2":"358.51"},{"x1":"371.66","y1":"344.9","x2":"422.23","y2":"358.51"},{"x1":"300.42","y1":"287.9","x2":"371.66","y2":"344.9"},{"x1":"341.78","y1":"450.65","x2":"334.06","y2":"420.9"},{"x1":"315.88","y1":"440.3","x2":"341.78","y2":"450.65"},{"x1":"270.28","y1":"307.7","x2":"281.25","y2":"392.93"},{"x1":"318.39","y1":"441.3","x2":"281.25","y2":"392.93"},{"x1":"223.28","y1":"394.95","x2":"281.25","y2":"392.93"},{"x1":"221.59","y1":"447.25","x2":"223.28","y2":"394.95"},{"x1":"315.88","y1":"440.3","x2":"281.25","y2":"491.82"},{"x1":"221.59","y1":"447.25","x2":"238.88","y2":"485.69"},{"x1":"281.25","y1":"491.82","x2":"238.88","y2":"485.69"},{"x1":"223.28","y1":"394.95","x2":"197.77","y2":"325.7"},{"x1":"165.47","y1":"221.61","x2":"161.32","y2":"237.32"},{"x1":"224.9","y1":"276.03","x2":"161.32","y2":"237.32"},{"x1":"174.08","y1":"173.88","x2":"215.67","y2":"204.89"},{"x1":"279.65","y1":"193.92","x2":"215.67","y2":"204.89"},{"x1":"284.16","y1":"218.22","x2":"279.65","y2":"193.92"},{"x1":"253.6","y1":"243.92","x2":"284.16","y2":"218.22"},{"x1":"240.78","y1":"276.2","x2":"253.6","y2":"243.92"},{"x1":"224.9","y1":"276.03","x2":"240.78","y2":"276.2"},{"x1":"105.23","y1":"248.24","x2":"115.76","y2":"228.39"},{"x1":"119.91","y1":"254.47","x2":"105.23","y2":"248.24"},{"x1":"133.24","y1":"313.21","x2":"119.91","y2":"254.47"},{"x1":"94.88","y1":"364.65","x2":"133.24","y2":"313.21"},{"x1":"166.68","y1":"338.93","x2":"197.77","y2":"325.7"},{"x1":"133.24","y1":"313.21","x2":"166.68","y2":"338.93"},{"x1":"197.77","y1":"325.7","x2":"220.29","y2":"288.48"},{"x1":"119.91","y1":"254.47","x2":"165.47","y2":"288.48"},{"x1":"220.29","y1":"288.48","x2":"165.47","y2":"288.48"},{"x1":"161.32","y1":"237.32","x2":"142.69","y2":"232"},{"x1":"105.23","y1":"248.24","x2":"142.69","y2":"232"},{"x1":"221.59","y1":"447.25","x2":"158.28","y2":"452.2"},{"x1":"101.55","y1":"392.64","x2":"158.28","y2":"452.2"},{"x1":"94.88","y1":"364.65","x2":"101.55","y2":"392.64"},{"x1":"166.68","y1":"338.93","x2":"101.55","y2":"392.64"},{"x1":"271.47","y1":"310.17","x2":"288.74","y2":"316.4"},{"x1":"300.42","y1":"287.9","x2":"288.74","y2":"316.4"},{"x1":"314.88","y1":"254.47","x2":"308.35","y2":"271.48"},{"x1":"314.88","y1":"276.12","x2":"308.35","y2":"271.48"},{"x1":"300.42","y1":"287.9","x2":"314.88","y2":"276.12"},{"x1":"294.02","y1":"271.48","x2":"270.28","y2":"307.7"},{"x1":"304.96","y1":"250.85","x2":"314.88","y2":"254.47"},{"x1":"294.02","y1":"271.48","x2":"304.96","y2":"250.85"},{"x1":"304.96","y1":"235.25","x2":"324.48","y2":"220.45"},{"x1":"347.21","y1":"240.64","x2":"304.96","y2":"235.25"},{"x1":"224.9","y1":"276.03","x2":"220.29","y2":"288.48"},{"x1":"262.08","y1":"291.74","x2":"222.44","y2":"282.67"},{"x1":"284.78","y1":"266.26","x2":"262.08","y2":"291.74"},{"x1":"304.96","y1":"235.25","x2":"291.04","y2":"229.7"},{"x1":"240.78","y1":"276.2","x2":"264.65","y2":"258.53"},{"x1":"271.47","y1":"284.08","x2":"264.65","y2":"258.53"},{"x1":"304.96","y1":"235.25","x2":"284.78","y2":"266.26"},{"x1":"291.04","y1":"229.7","x2":"285.28","y2":"264.14"},{"x1":"264.65","y1":"258.53","x2":"287.16","y2":"248.35"},{"x1":"285.28","y1":"264.14","x2":"294.02","y2":"271.48"}]);
*/


  	console.log("der converter hats nicht gekillt");

  	for(var i = 0; i< Nodes.length; i++){
  	Nodes[i].name = i ;
  	}

  	//Node.connectedTo.push(Node);

  
  	testCar.r = 20;

  	//testCar.startMoveWithoutPathfinder([Node[0],Nodes[1],Nodes[2],Nodes[3],Nodes[4],Nodes[5]],Nodes[0]);
  }

  function draw(){

  	background(200)
  	
  	fill(240);
  	stroke(230);

  	for ( var i = 0; i<Nodes.length; i++){
  			
  			fill(240);
  			stroke(230);

  			Nodes[i].draw();
  		
  			Nodes[i].drawStreets();
  		
  	}
  	
  	fill(200,200,100);

  	testCar.move();
  	ellipse(testCar.x,testCar.y,testCar.r,testCar.r);

  }

  var currMoving;
  var isCurrMoving = false;

  function mousePressed(){
  for(var i = 0; i< Nodes.length;i++){
  		if(abs(Nodes[i].x-mouseX)<20&&abs(Nodes[i].y-mouseY)<20){

  		currMoving = Nodes[i];
  		console.log(currMoving.toString());
  		isCurrMoving = true;
  		}
 	 }

  }
  

  function mouseDragged(){
  if(isCurrMoving){
  		currMoving.x= mouseX;
  		currMoving.y= mouseY;
 	
 	}
  }



  function mouseReleased(){
  isCurrMoving = false;
  
  currMoving = null;



  //testCar.startMoveWithoutPathfinder([Nodes[0],Nodes[1],Nodes[2],Nodes[3],Nodes[4],Nodes[5],Nodes[0],Nodes[1],Nodes[2],Nodes[3],Nodes[4],Nodes[5],Nodes[0],Nodes[1],Nodes[2],Nodes[3],Nodes[4],Nodes[5],Nodes[0],Nodes[1],Nodes[2],Nodes[3],Nodes[4],Nodes[5],Nodes[0],Nodes[1],Nodes[2],Nodes[3],Nodes[4],Nodes[5],Nodes[0],Nodes[1],Nodes[2],Nodes[3],Nodes[4],Nodes[5],Nodes[0],Nodes[1],Nodes[2],Nodes[3],Nodes[4],Nodes[5],Nodes[0],Nodes[1],Nodes[2],Nodes[3],Nodes[4],Nodes[5],Nodes[0],Nodes[1],Nodes[2],Nodes[3],Nodes[4],Nodes[5],Nodes[0],Nodes[1],Nodes[2],Nodes[3],Nodes[4],Nodes[5],Nodes[0],Nodes[1],Nodes[2],Nodes[3],Nodes[4],Nodes[5],Nodes[0],Nodes[1],Nodes[2],Nodes[3],Nodes[4],Nodes[5],Nodes[0],Nodes[1],Nodes[2],Nodes[3],Nodes[4],Nodes[5],Nodes[0],Nodes[1],Nodes[2],Nodes[3],Nodes[4],Nodes[5],Nodes[0],Nodes[1],Nodes[2],Nodes[3],Nodes[4],Nodes[5],Nodes[0],Nodes[1],Nodes[2],Nodes[3],Nodes[4],Nodes[5],Nodes[0],Nodes[1],Nodes[2],Nodes[3],Nodes[4],Nodes[5],Nodes[0],Nodes[1],Nodes[2],Nodes[3],Nodes[4],Nodes[5],Nodes[0],Nodes[1],Nodes[2],Nodes[3],Nodes[4],Nodes[5],Nodes[0],Nodes[1],Nodes[2],Nodes[3],Nodes[4],Nodes[5],Nodes[0],Nodes[1],Nodes[2],Nodes[3],Nodes[4],Nodes[5],Nodes[0],Nodes[1],Nodes[2],Nodes[3],Nodes[4],Nodes[5],Nodes[0],Nodes[1],Nodes[2],Nodes[3],Nodes[4],Nodes[5],Nodes[0],Nodes[1],Nodes[2],Nodes[3],Nodes[4],Nodes[5],Nodes[0],Nodes[1],Nodes[2],Nodes[3],Nodes[4],Nodes[5],Nodes[0],Nodes[1],Nodes[2],Nodes[3],Nodes[4],Nodes[5],Nodes[0],Nodes[1],Nodes[2],Nodes[3],Nodes[4],Nodes[5],Nodes[0],Nodes[1],Nodes[2],Nodes[3],Nodes[4],Nodes[5],Nodes[0],Nodes[1],Nodes[2],Nodes[3],Nodes[4],Nodes[5],Nodes[0],Nodes[1],Nodes[2],Nodes[3],Nodes[4],Nodes[5],Nodes[0],Nodes[1],Nodes[2],Nodes[3],Nodes[4],Nodes[5]]);
  

  }


















  </script>
  


  <!-- this line removes any default padding and style. you might only need one of these values set. -->
  <style> body {padding: 0; margin: 0;} </style>
</head>

<body>	
</body>
</html>