{"version":3,"sources":["helpers.js"],"names":["cityDict","cityIDsWithoutStuttgart","cityIDs","slice","splice","indexOf","Stuttgart","debugged","attatchDebugger","obj","push","resize","canvas","sidebarWidth","$","hasClass","width","environment","scale","min","windowHeight","windowWidth","resizeCanvas","findStuckCar","stuckCars","cars","map","car","isStuck","floor","random","length","hsv2rgb","hue","saturation","vibrancy","rgb","i","data","Math","x","round","toString","join","chargeToColor","charge","simulation","carChargeLimit","sat","abs"],"mappings":";;AAAA,IAAIA,WAAW;AACX,iBAAa,WADF;AAEX,gBAAY,UAFD;AAGX,gBAAY,eAHD;AAIX,iBAAa,SAJF;AAKX,iBAAa,YALF;AAMX,iBAAa,aANF;AAOX,gBAAY,YAPD;AAQX,gBAAY,WARD;AASX,iBAAa,WATF;AAUX,gBAAY,SAVD;AAWX,gBAAY,SAXD;AAYX,iBAAa,cAZF;AAaX,eAAW,oBAbA;AAcX,iBAAa,WAdF;;AAgBX,iBAAa,WAhBF;AAiBX,gBAAY,UAjBD;AAkBX,qBAAiB,UAlBN;AAmBX,eAAW,WAnBA;AAoBX,kBAAc,WApBH;AAqBX,mBAAe,WArBJ;AAsBX,kBAAc,UAtBH;AAuBX,iBAAa,UAvBF;AAwBX,iBAAa,WAxBF;AAyBX,eAAW,UAzBA;AA0BX,eAAW,UA1BA;AA2BX,oBAAgB,WA3BL;AA4BX,0BAAsB,SA5BX;AA6BX,iBAAa;AA7BF,CAAf;;AAgCA,IAAIC,0BAA0BC,QAAQC,KAAR,EAA9B;;AAEAF,wBAAwBG,MAAxB,CAA+BF,QAAQG,OAAR,CAAgBL,SAASM,SAAzB,CAA/B,EAAoE,CAApE;;AAEA,IAAIC,WAAW,EAAf;;AAEA,SAASC,eAAT,CAAyBC,GAAzB,EAA8B;AAC1BF,aAASG,IAAT,CAAcD,GAAd;AACH;;AAED,SAASE,MAAT,CAAgBC,MAAhB,EAAwB;AACpB,QAAIC,eAAeC,EAAE,MAAF,EAAUC,QAAV,CAAmB,YAAnB,IAAmCD,EAAE,UAAF,EAAcE,KAAd,EAAnC,GAA2D,CAA9E;;AAEAC,gBAAYC,KAAZ,GAAoBC,IAAIP,OAAOQ,YAAP,GAAsB,GAA1B,EAA+B,CAACR,OAAOS,WAAP,GAAqBR,YAAtB,IAAsC,GAArE,CAApB;AACAD,WAAOU,YAAP,CAAoBV,OAAOS,WAAP,GAAqBR,YAArB,GAAoC,GAAxD,EAA6DD,OAAOQ,YAApE;AACH;;AAED,SAASG,YAAT,GAAwB;AACpB,QAAIC,YAAYC,KAAKC,GAAL,CAAS,UAASC,GAAT,EAAc;AAAE,eAAOA,IAAIC,OAAX;AAAoB,KAA7C,CAAhB;;AAEA,WAAOJ,UAAUK,MAAMC,OAAO,CAAP,EAAUN,UAAUO,MAApB,CAAN,CAAV,CAAP;AACH;;AAED,SAASC,OAAT,CAAiBC,GAAjB,EAAsBC,UAAtB,EAAkCC,QAAlC,EAA4C;AACxC;AACA,QAAIC,GAAJ;AAAA,QAASC,CAAT;AAAA,QACIC,OAAO,EADX;;AAGA,QAAGJ,eAAe,CAAlB,EAAqB;AACjBE,cAAM,CAACD,QAAD,EAAWA,QAAX,EAAqBA,QAArB,CAAN;AACH,KAFD,MAEO;AACHF,eAAO,EAAP;;AAEAI,YAAIE,KAAKV,KAAL,CAAWI,GAAX,CAAJ;AACAK,eAAO,CACHH,YAAY,IAAID,UAAhB,CADG,EAEHC,YAAY,IAAID,cAAcD,MAAMI,CAApB,CAAhB,CAFG,EAGHF,YAAY,IAAID,cAAc,KAAKD,MAAMI,CAAX,CAAd,CAAhB,CAHG,CAAP;AAKA,gBAAQA,CAAR;AACA,iBAAK,CAAL;AACID,sBAAM,CAACD,QAAD,EAAWG,KAAK,CAAL,CAAX,EAAoBA,KAAK,CAAL,CAApB,CAAN;AACA;AACJ,iBAAK,CAAL;AACIF,sBAAM,CAACE,KAAK,CAAL,CAAD,EAAUH,QAAV,EAAoBG,KAAK,CAAL,CAApB,CAAN;AACA;AACJ,iBAAK,CAAL;AACIF,sBAAM,CAACE,KAAK,CAAL,CAAD,EAAUH,QAAV,EAAoBG,KAAK,CAAL,CAApB,CAAN;AACA;AACJ,iBAAK,CAAL;AACIF,sBAAM,CAACE,KAAK,CAAL,CAAD,EAAUA,KAAK,CAAL,CAAV,EAAmBH,QAAnB,CAAN;AACA;AACJ,iBAAK,CAAL;AACIC,sBAAM,CAACE,KAAK,CAAL,CAAD,EAAUA,KAAK,CAAL,CAAV,EAAmBH,QAAnB,CAAN;AACA;AACJ;AACIC,sBAAM,CAACD,QAAD,EAAWG,KAAK,CAAL,CAAX,EAAoBA,KAAK,CAAL,CAApB,CAAN;AACA;AAlBJ;AAoBH;;AAED,WAAO,MAAMF,IAAIV,GAAJ,CAAQ,UAASc,CAAT,EAAY;AAC7B,eAAO,CAAC,MAAMD,KAAKE,KAAL,CAAWD,IAAI,GAAf,EAAoBE,QAApB,CAA6B,EAA7B,CAAP,EAAyCvC,KAAzC,CAA+C,CAAC,CAAhD,CAAP;AACH,KAFY,EAEVwC,IAFU,CAEL,EAFK,CAAb;AAGH;;AAED,SAASC,aAAT,CAAuBC,MAAvB,EAA+B;AAC3BA,cAAU,IAAI5B,YAAY6B,UAAZ,CAAuBC,cAArC;AACA,QAAGF,SAAS,CAAZ,EAAe;AACXA,iBAAS,CAAT;AACH;AACD,QAAIZ,MAAM,MAAMY,MAAhB;AACA,QAAIG,MAAMC,IAAIJ,SAAS,EAAb,IAAmB,EAA7B;;AAEA,WAAOb,QAAQC,GAAR,EAAae,GAAb,EAAkB,CAAlB,CAAP;AACH","file":"helpers.js","sourcesContent":["var cityDict = {\n    '248169543': 'Ditzingen',\n    '89317467': 'Leonberg',\n    '58922085': 'Sindelnfingen',\n    '249665541': 'Musberg',\n    '157476409': 'Steinbronn',\n    '124873928': 'Filderstadt',\n    '78784342': 'Ostfildern',\n    '98860443': 'Neuhausen',\n    '151269436': 'Esslingen',\n    '13734131': 'Altbach',\n    '90947800': 'Remseck',\n    '216687444': 'Kornwestheim',\n    '7970225': 'Korntal-MÃ¼nchingen',\n    '199885805': 'Stuttgart',\n\n    'Ditzingen': '248169543',\n    'Leonberg': '89317467',\n    'Sindelnfingen': '58922085',\n    'Musberg': '249665541',\n    'Steinbronn': '157476409',\n    'Filderstadt': '124873928',\n    'Ostfildern': '78784342',\n    'Neuhausen': '98860443',\n    'Esslingen': '151269436',\n    'Altbach': '13734131',\n    'Remseck': '90947800',\n    'Kornwestheim': '216687444',\n    'Korntal-MÃ¼nchingen': '7970225',\n    'Stuttgart': '199885805'\n}\n\nvar cityIDsWithoutStuttgart = cityIDs.slice()\n\ncityIDsWithoutStuttgart.splice(cityIDs.indexOf(cityDict.Stuttgart), 1)\n\nvar debugged = []\n\nfunction attatchDebugger(obj) {\n    debugged.push(obj)\n}\n\nfunction resize(canvas) {\n    var sidebarWidth = $('body').hasClass('nav-active') ? $('#sidebar').width() : 0\n\n    environment.scale = min(canvas.windowHeight / 500, (canvas.windowWidth - sidebarWidth) / 550);\n    canvas.resizeCanvas(canvas.windowWidth - sidebarWidth + 100, canvas.windowHeight);\n}\n\nfunction findStuckCar() {\n    var stuckCars = cars.map(function(car) { return car.isStuck })\n\n    return stuckCars[floor(random(0, stuckCars.length))]\n}\n\nfunction hsv2rgb(hue, saturation, vibrancy) {\n    // adapted from http://schinckel.net/2012/01/10/hsv-to-rgb-in-javascript/\n    var rgb, i,\n        data = [];\n\n    if(saturation === 0) {\n        rgb = [vibrancy, vibrancy, vibrancy];\n    } else {\n        hue /= 60;\n\n        i = Math.floor(hue);\n        data = [\n            vibrancy * (1 - saturation),\n            vibrancy * (1 - saturation * (hue - i)),\n            vibrancy * (1 - saturation * (1 - (hue - i)))\n        ];\n        switch (i) {\n        case 0:\n            rgb = [vibrancy, data[2], data[0]];\n            break;\n        case 1:\n            rgb = [data[1], vibrancy, data[0]];\n            break;\n        case 2:\n            rgb = [data[0], vibrancy, data[2]];\n            break;\n        case 3:\n            rgb = [data[0], data[1], vibrancy];\n            break;\n        case 4:\n            rgb = [data[2], data[0], vibrancy];\n            break;\n        default:\n            rgb = [vibrancy, data[0], data[1]];\n            break;\n        }\n    }\n\n    return '#' + rgb.map(function(x) {\n        return ('0' + Math.round(x * 255).toString(16)).slice(-2);\n    }).join('');\n}\n\nfunction chargeToColor(charge) {\n    charge *= 1 / environment.simulation.carChargeLimit\n    if(charge > 1) {\n        charge = 1\n    }\n    var hue = 120 * charge\n    var sat = abs(charge - 50) / 50\n\n    return hsv2rgb(hue, sat, 1)\n}\n"]}