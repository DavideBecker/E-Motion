{"version":3,"sources":["setup.js"],"names":["queue","timer","daytimeCycle","backgroundBrightness","brightDir","staticMap","p5","renderMap","setup","frameRate","colorMode","HSB","rectMode","CENTER","noStroke","canvas","createCanvas","parent","resize","window","carIndex","environment","simulation","carAmount","Car","truckIndex","truckAmount","Truck","console","table","cars","trucks","Events","on","wroom","addToQueue","statistics","stuckCarsToday","stuckCarsTotal","updateAverageStuckCars","city","fillQueueWithCities","clearQueueFromCities","daysPassed","windowResized"],"mappings":";;AAAA,IAAIA,QAAQ,EAAZ;AACA,IAAIC,QAAQ,CAAZ;AACA,IAAIC,eAAe,CAAnB;AACA,IAAIC,uBAAuB,CAA3B;AACA,IAAIC,YAAY,CAAhB;AACA,IAAIC,YAAY,IAAIC,EAAJ,CAAOC,SAAP,CAAhB;;AAEA,SAASC,KAAT,GAAiB;AACbC,cAAU,EAAV;AACAC,cAAUC,GAAV;AACAC,aAASC,MAAT;AACAC;AACA,QAAIC,SAASC,aAAa,GAAb,EAAkB,GAAlB,CAAb;;AAEAD,WAAOE,MAAP,CAAc,gBAAd;;AAEAC,WAAOC,MAAP;;AAEA,SAAI,IAAIC,WAAW,CAAnB,EAAsBA,WAAWC,YAAYC,UAAZ,CAAuBC,SAAxD,EAAmEH,UAAnE,EAA+E;AAC3E,YAAII,GAAJ;AACH;;AAED,SAAI,IAAIC,aAAa,CAArB,EAAwBA,aAAaJ,YAAYC,UAAZ,CAAuBI,WAA5D,EAAyED,YAAzE,EAAuF;AACnF,YAAIE,KAAJ;AACH;;AAEDC,YAAQC,KAAR,CAAcC,IAAd;AACAF,YAAQC,KAAR,CAAcE,MAAd;;AAEAC,WAAOC,EAAP,CAAU,UAAV,EAAsB,UAASC,KAAT,EAAgB;AAClCC,mBAAWD,KAAX;;AAEAb,oBAAYe,UAAZ,CAAuBC,cAAvB,IAAyC,CAAzC;AACAhB,oBAAYe,UAAZ,CAAuBE,cAAvB,IAAyC,CAAzC;;AAEAC;AACH,KAPD;;AASAP,WAAOC,EAAP,CAAU,mBAAV,EAA+B,UAASO,IAAT,EAAe;AAC1CL,mBAAWK,IAAX;AACH,KAFD;;AAIAR,WAAOC,EAAP,CAAU,kBAAV,EAA8B,YAAW;AACrCQ;AACH,KAFD;;AAIAT,WAAOC,EAAP,CAAU,gBAAV,EAA4B,YAAW;AACnCS;AACH,KAFD;;AAIAV,WAAOC,EAAP,CAAU,UAAV,EAAsB,YAAW;AAC7B7B,oBAAY,GAAZ;;AAEAiB,oBAAYe,UAAZ,CAAuBO,UAAvB,IAAqC,CAArC;AACAtB,oBAAYe,UAAZ,CAAuBC,cAAvB,GAAwC,CAAxC;AACAE;AACH,KAND;;AASAP,WAAOC,EAAP,CAAU,YAAV,EAAwB,YAAW;AAC/B7B,oBAAY,CAAC,CAAb;AACH,KAFD;AAGH;;AAED,SAASwC,aAAT,GAAyB;AACrB1B,WAAOC,MAAP;AACH","file":"setup.js","sourcesContent":["var queue = []\nvar timer = 1;\nvar daytimeCycle = 1;\nvar backgroundBrightness = 0;\nvar brightDir = 0;\nvar staticMap = new p5(renderMap)\n\nfunction setup() {\n    frameRate(60)\n    colorMode(HSB)\n    rectMode(CENTER)\n    noStroke()\n    var canvas = createCanvas(500, 500)\n\n    canvas.parent('canvas-wrapper');\n\n    resize(window)\n\n    for(var carIndex = 0; carIndex < environment.simulation.carAmount; carIndex++) {\n        new Car()\n    }\n\n    for(var truckIndex = 0; truckIndex < environment.simulation.truckAmount; truckIndex++) {\n        new Truck()\n    }\n\n    console.table(cars)\n    console.table(trucks)\n\n    Events.on('carStuck', function(wroom) {\n        addToQueue(wroom)\n\n        environment.statistics.stuckCarsToday += 1\n        environment.statistics.stuckCarsTotal += 1\n\n        updateAverageStuckCars()\n    })\n\n    Events.on('cityNeedsCharging', function(city) {\n        addToQueue(city);\n    })\n\n    Events.on('nightChargeStart', function() {\n        fillQueueWithCities()\n    })\n\n    Events.on('nightChargeEnd', function() {\n        clearQueueFromCities()\n    })\n\n    Events.on('nightEnd', function() {\n        brightDir = 0.3\n\n        environment.statistics.daysPassed += 1\n        environment.statistics.stuckCarsToday = 0\n        updateAverageStuckCars()\n    })\n\n\n    Events.on('nightStart', function() {\n        brightDir = -1\n    })\n}\n\nfunction windowResized() {\n    resize(window)\n}\n"]}